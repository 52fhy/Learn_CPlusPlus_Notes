# 类和对象

## 构造函数和析构函数

首先看一个简单示例：

``` cpp
/**
* file MyClass.cpp
*/

#include <iostream>

using namespace std;

class MyClass
{
  private:
    int num;

  public:
    MyClass(int n = 0) : num(n) {}//构造函数
    ~MyClass()
    {
        cout << num << "执行析构函数" << endl;
    };//析构函数
};

int main()
{
    MyClass a; //最后自动执行析构
    MyClass b(3); //最后自动执行析构
    MyClass *p = new MyClass(1);
    MyClass *q = new MyClass(2); //不会执行析构
    delete p;                    //先执行析构

    return 0;
}
```

这里定义了一个类 `MyClass` 。注意类结尾需要用 `;` 结束！

其中与类名相同的函数叫**构造函数**，与类名相同且前面有 `~` 的函数是**析构函数**。

由于形参类型的不同或者形参个数的不同，构造函数可以有很多个。如果没有写构造函数，C++会默认生成一个空的构造函数，形参和函数体均为空。注意构造函数没有返回值，无需用户手动调用，系统会自动调用。

构造函数可以有形参，并可以在函数体内对成员进行初始化：
``` cpp
MyClass(int n = 0){
    num = n;
}//构造函数
```

也可以写成：
``` cpp
MyClass(int n = 0) : num(n) {}//构造函数
```
这种形式是在原来函数首部的末尾加一个冒号，然后列出参数的初始化表，有了初始化表，构造函数的函数体一般为空。

析构函数只能有一个，没有形参和返回值。当对象的声明周期结束时，将自动执行。

上面程序执行后会输出：
``` cpp
1执行析构函数
3执行析构函数
0执行析构函数
```

可以发现，由`new`关键字创建的对象，只有执行`delete`关键字才会执行析构函数。

另外，析构函数在执行顺序上，是最后面调用的构造函数对应的析构函数先执行。如果是调用`delete`关键字执行析构，则是先调用`delete`者先执行析构。
